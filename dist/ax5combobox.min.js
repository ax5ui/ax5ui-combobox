"use strict";!function(e,t){var o=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.instanceId=ax5.getGuid(),this.queue=[],this.config={theme:"default",animateTime:250,lang:{noSelected:"",noOptions:"no options",loading:"now loading.."},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var n=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},a=function(e){return'\n                <div class="ax5combobox-option-group {{theme}} {{size}}" data-ax5combobox-option-group="{{id}}">\n                    <div class="ax-combobox-body">\n                        <div class="ax-combobox-option-group-content" data-els="content"></div>\n                    </div>\n                    <div class="ax-combobox-arrow"></div> \n                </div>\n                '},s=function(){return'\n                <div class="form-control {{formSize}} ax5combobox-display {{theme}}" \n                data-ax5combobox-display="{{id}}" data-ax5combobox-instance="{{instanceId}}">\n                    <div class="ax5combobox-display-table" data-els="display-table">\n                        <a {{^tabIndex}}href="#ax5combobox-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n                        data-ax5combobox-display="label"\n                        contenteditable="true"\n                        spellcheck="false">{{{label}}}</a>\n                        <div data-ax5combobox-display="addon"> \n                            {{#multiple}}{{#reset}}\n                            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                            {{/reset}}{{/multiple}}\n                            {{#icons}}\n                            <span class="addon-icon-closed">{{clesed}}</span>\n                            <span class="addon-icon-opened">{{opened}}</span>\n                            {{/icons}}\n                            {{^icons}}\n                            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                            {{/icons}}\n                        </div>\n                    </div>\n                </a>\n                '},l=function(){return'\n                <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n                '},c=function(e){return'\n                {{#waitOptions}}\n                    <div class="ax-combobox-option-item">\n                            <div class="ax-combobox-option-item-holder">\n                                <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                    {{{lang.loading}}}\n                                </span>\n                            </div>\n                        </div>\n                {{/waitOptions}}\n                {{^waitOptions}}\n                    {{#options}}\n                        {{#optgroup}}\n                            <div class="ax-combobox-option-group">\n                                <div class="ax-combobox-option-item-holder">\n                                    <span class="ax-combobox-option-group-label">\n                                        {{{.}}}\n                                    </span>\n                                </div>\n                                {{#options}}\n                                {{^hide}}\n                                <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                                data-option-value="{{'+e.optionValue+'}}" \n                                {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                                    <div class="ax-combobox-option-item-holder">\n                                        {{#multiple}}\n                                        <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                            <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                        </span>\n                                        {{/multiple}}\n                                        <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+e.optionText+'}}</span>\n                                    </div>\n                                </div>\n                                {{/hide}}\n                                {{/options}}\n                            </div>                            \n                        {{/optgroup}}\n                        {{^optgroup}}\n                        {{^hide}}\n                        <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                            <div class="ax-combobox-option-item-holder">\n                                {{#multiple}}\n                                <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                    <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                </span>\n                                {{/multiple}}\n                                <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+e.optionText+'}}</span>\n                            </div>\n                        </div>\n                        {{/hide}}\n                        {{/optgroup}}\n                    {{/options}}\n                    {{^options}}\n                        <div class="ax-combobox-option-item">\n                            <div class="ax-combobox-option-item-holder">\n                                <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                    {{{lang.noOptions}}}\n                                </span>\n                            </div>\n                        </div>\n                    {{/options}}\n                {{/waitOptions}}\n                '},u=function(e){return'\n                {{#selected}}\n                <span tabindex="-1" data-ax5combobox-selected-label="{{@i}}" data-ax5combobox-selected-text="{{text}}">{{text}}</span> \n                {{/selected}}\n                <span></span>\n                '},d=function(){for(var e,t=this.queue.length;t--;)this.queue[t].$display&&(e=Math.max(this.queue[t].$select.outerWidth(),o.number(this.queue[t].minWidth)),this.queue[t].$display.css({"min-width":e}),this.queue[t].reset&&this.queue[t].$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}));return t=null,e=null,this},p=function(e){if(!this.activecomboboxOptionGroup)return this;var t=this.queue[this.activecomboboxQueueIndex],o={},i={};e&&jQuery(document.body).append(this.activecomboboxOptionGroup),o=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activecomboboxOptionGroup.addClass("direction-"+t.direction),this.activecomboboxOptionGroup.css(function(){return"top"==t.direction?{left:o.left,top:o.top+i.height+1,width:i.width}:"bottom"==t.direction?{left:o.left,top:o.top-this.activecomboboxOptionGroup.outerHeight()-1,width:i.width}:void 0}.call(this))},r=function(e,t){if(!this.activecomboboxOptionGroup)return this;var i=this.queue[this.activecomboboxQueueIndex],n="display";return(t=o.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")?(n="optionItem",!0):i.$target.get(0)==e?(n="display",!0):void 0}))?("optionItem"===n&&(this.val(i.id,{index:{gindex:t.getAttribute("data-option-group-index"),index:t.getAttribute("data-option-index")}},void 0,"internal"),i.$display.focus(),i.multiple||this.close()),this):(this.close(),this)},h=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)this.close();else if(e.which==ax5.info.eventKeys.RETURN){for(var t=[],i=this.queue[this.activecomboboxQueueIndex],n=i.$displayLabel.get(0).childNodes,a=0,s=n.length;s>a;a++){var l=n[a];if(l.nodeType in $){var c=$[l.nodeType].call(this,this.activecomboboxQueueIndex,l);"undefined"!=typeof c&&t.push(c)}}this.val(i.id,null,void 0,"internal"),this.val(i.id,t,void 0,"internal"),o.selectRange(i.$displayLabel,"end"),i.multiple||this.close()}},x=function(e){var t=this.queue[e],o={};return o.id=t.id,o.theme=t.theme,o.size="ax5combobox-option-group-"+t.size,o.multiple=t.multiple,o.lang=t.lang,o.options=t.options,o.selected=t.selected,o.hasSelected=o.selected&&o.selected.length>0,ax5.mustache.render(u.call(this,t.columnKeys),o)},b=function(e){this.queue[e].$displayLabel.html(x.call(this,e))},m=function(e,t){var o,i=[],n=-1,a=this.queue[e].indexedOptions.length-1;if(""!=t){for(;a-n++;){if(o=this.queue[e].indexedOptions[n],(""+o.text).toLowerCase()==t.toLowerCase()){i=[{"@findex":o["@findex"],optionsSort:0}];break}var s=(""+o.text).toLowerCase().search(t.toLowerCase());if(s>-1&&(i.push({"@findex":o["@findex"],optionsSort:s}),i.length>2))break;s=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort})}i&&i.length>0?v.call(this,e,void 0,i[0]["@findex"]):f.call(this,e);try{return i}finally{i=null,n=null,a=null,o=null}},f=function(e){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected")},v=function(e,t,i){var n,a,s,l;if(this.activecomboboxOptionGroup&&this.queue[e].options&&this.queue[e].options.length>0){if("undefined"!=typeof i?n=i:(a=-1==this.queue[e].optionFocusIndex?this.queue[e].optionSelectedIndex||-1:this.queue[e].optionFocusIndex,-1==a?n=t>0?0:this.queue[e].optionItemLength-1:(n=a+t,0>n?n=0:n>this.queue[e].optionItemLength-1&&(n=this.queue[e].optionItemLength-1))),this.queue[e].optionFocusIndex=n,!this.queue[e].options[n].hide){this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover"),s=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activecomboboxOptionGroup.find('[data-els="content"]');var c=s.outerHeight(),u=l.innerHeight(),d=l.scrollTop(),p=s.position().top+l.scrollTop();p+c>u+d?l.scrollTop(p+c-u):d>p&&l.scrollTop(p)}"undefined"!=typeof t&&(this.queue[e].$displayLabel.html(this.queue[e].indexedOptions[n].text),o.selectRange(this.queue[e].$displayLabel,"end"))}},g=function(){var e=o.debounce(function(e){for(var t=[],n="",a=this.queue[e],s=a.$displayLabel.get(0).childNodes,l=0,c=s.length;c>l;l++){var u=s[l];if(u.nodeType in $){var d=$[u.nodeType].call(this,this.activecomboboxQueueIndex,u,!0);"undefined"==typeof d||(o.isString(d)?(n=d,"1"==u.nodeType&&u.getAttribute("data-ax5combobox-selected-text")?n=!1:t.push(d)):t.push(d))}}n===!1?(this.val(a.id,null,void 0,"internal"),this.val(a.id,t,void 0,"internal"),o.selectRange(a.$displayLabel,"end")):""!=n&&m.call(i,e,n)},300),t={click:function(e,t){var n=o.findParentNode(t.target,function(e){return e.getAttribute("data-selected-clear")?!0:void 0});n?this.val(e,{clear:!0}):i.activecomboboxQueueIndex==e?-1==this.queue[e].optionFocusIndex&&i.close():i.open(e)},keyUp:function(t,n){return n.which==ax5.info.eventKeys.ESC&&-1===i.activecomboboxQueueIndex?(o.stopEvent(n),this):(i.activecomboboxQueueIndex!=t&&i.open(t),void e.call(this,t))},keyDown:function(e,t){t.which==ax5.info.eventKeys.ESC?o.stopEvent(t):t.which==ax5.info.eventKeys.RETURN?o.stopEvent(t):t.which==ax5.info.eventKeys.DOWN?(v.call(this,e,1),o.stopEvent(t)):t.which==ax5.info.eventKeys.UP&&(v.call(this,e,-1),o.stopEvent(t))},focus:function(e,t){},blur:function(e,t){}};return function(e){var o=this.queue[e],i={};return o.selected=[],o.$display?(o.$displayLabel.html(x.call(this,e)),o.options=y.call(this,e,o.options),d.call(this)):(i.instanceId=this.instanceId,i.id=o.id,i.name=o.name,i.theme=o.theme,i.tabIndex=o.tabIndex,i.multiple=o.multiple,i.reset=o.reset,i.label=x.call(this,e),i.formSize=function(){return o.size?"input-"+o.size:""}(),o.$display=jQuery(ax5.mustache.render(s.call(this,e),i)),o.$displayLabel=o.$display.find('[data-ax5combobox-display="label"]'),o.$target.find("select").get(0)?(o.$select=o.$target.find("select"),o.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&o.$select.attr("name","name"),i.multiple&&o.$select.attr("multiple","multiple")):(o.$select=jQuery(ax5.mustache.render(l.call(this,e),i)),o.$target.append(o.$select)),o.$target.append(o.$display),o.options=y.call(this,e,o.options),d.call(this)),o.$display.unbind("click.ax5combobox").bind("click.ax5combobox",t.click.bind(this,e)),o.$displayLabel.unbind("focus.ax5combobox").bind("focus.ax5combobox",t.focus.bind(this,e)).unbind("blur.ax5combobox").bind("blur.ax5combobox",t.blur.bind(this,e)).unbind("keyup.ax5combobox").bind("keyup.ax5combobox",t.keyUp.bind(this,e)).unbind("keydown.ax5combobox").bind("keydown.ax5combobox",t.keyDown.bind(this,e)),i=null,o=null,e=null,this}}(),y=function(){var e=function(e,t){t?this.queue[e].multiple?this.queue[e].selected.push(jQuery.extend({},t)):this.queue[e].selected[0]=jQuery.extend({},t):this.queue[e].selected=[]};return function(t,n){var a,s,l,c=this.queue[t],u=0;return e.call(this,t,!1),n?(c.options=n,c.indexedOptions=[],a=[],c.options.forEach(function(o,n){o.optgroup?(o["@gindex"]=n,o.options.forEach(function(o,n){o["@index"]=n,o["@findex"]=u,a.push('<option value="'+o[c.columnKeys.optionValue]+'" '+(o[c.columnKeys.optionSelected]?' selected="selected"':"")+">"+o[c.columnKeys.optionText]+"</option>"),o[c.columnKeys.optionSelected]&&e.call(i,t,o),c.indexedOptions.push({"@findex":u,value:o[c.columnKeys.optionValue],text:o[c.columnKeys.optionText]}),u++})):(o["@index"]=n,o["@findex"]=u,a.push('<option value="'+o[c.columnKeys.optionValue]+'" '+(o[c.columnKeys.optionSelected]?' selected="selected"':"")+">"+o[c.columnKeys.optionText]+"</option>"),o[c.columnKeys.optionSelected]&&e.call(i,t,o),c.indexedOptions.push({"@findex":u,value:o[c.columnKeys.optionValue],text:o[c.columnKeys.optionText]}),u++)}),c.optionItemLength=u,c.$select.html(a.join(""))):(s=o.toArray(c.$select.get(0).options),l=[],s.forEach(function(o,n){var a={};a[c.columnKeys.optionValue]=o.value,a[c.columnKeys.optionText]=o.text,a[c.columnKeys.optionSelected]=o.selected,a["@index"]=n,o.selected&&e.call(i,t,a),l.push(a),a=null}),c.options=l,c.indexedOptions=l),a=null,s=null,l=null,c.options}}(),q=function(e){return o.isString(e)||(e=jQuery(e).data("data-ax5combobox-id")),o.isString(e)?o.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5combobox","402","getQueIdx"))},S=function(e,t,o){return"undefined"==typeof o?e.multiple?!t:!0:o},O=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},$={1:function(e,t,o){var i,n,a=(t.textContent||t.innerText).replace(/^\W*|\W*$/g,""),s=this.queue[e];if(t.getAttribute("data-ax5combobox-selected-text")==a)return i=t.getAttribute("data-ax5combobox-selected-label"),n=s.selected[i],{index:{gindex:n["@gindex"],index:n["@index"]}};if(t.getAttribute("data-ax5combobox-selected-text"))return a;if(""!=a){var l=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+s.optionFocusIndex+'"]');return l.get(0)&&l.attr("data-option-value")==a?{index:{gindex:l.attr("data-option-group-index"),index:l.attr("data-option-index")}}:this.queue[e].editable||o?a:void 0}},3:function(e,t,o){var i=(t.textContent||t.innerText).replace(/^\W*|\W*$/g,"");if(""!=i){var n=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+this.queue[e].optionFocusIndex+'"]');return n.get(0)&&n.attr("data-option-value")==i?{index:{gindex:n.attr("data-option-group-index"),index:n.attr("data-option-index")}}:this.queue[e].editable||o?i:void 0}}};this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5combobox-display-"+this.instanceId,function(){d.call(this)}.bind(this))},this.bind=function(t){var i,n={};return t=jQuery.extend(!0,n,e,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("data-ax5combobox-id")),t.id||(t.id="ax5combobox-"+ax5.getGuid(),t.$target.data("data-ax5combobox-id",t.id)),t.name=t.$target.attr("data-ax5combobox"),t.options&&(t.options=JSON.parse(JSON.stringify(t.options))),function(e){o.isObject(e)&&!e.error&&(t=jQuery.extend(!0,t,e))}(o.parseJson(t.$target.attr("data-ax5combobox-config"),!0)),i=o.search(this.queue,function(){return this.id==t.id}),-1===i?(this.queue.push(t),g.call(this,this.queue.length-1)):(this.queue[i]=jQuery.extend(!0,{},this.queue[i],t),g.call(this,i)),n=null,i=null,this):(console.log(ax5.info.getError("ax5combobox","401","bind")),this)},this.open=function(){var t=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var t={},i=this.queue[this.activecomboboxQueueIndex];!function(e,t){var i={};t.options.forEach(function(t,o){t["@index"]=o,i[t[e.columnKeys.optionValue]]=t}),o.isArray(e.selected)&&e.selected.forEach(function(o){i[o[e.columnKeys.optionValue]]&&(t.options[i[o[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(i,e),i.$display.find('[data-ax5combobox-display="label"]').html(x.call(this,this.activecomboboxQueueIndex)),i.options=y.call(this,this.activecomboboxQueueIndex,e.options),d.call(this),t.id=i.id,t.theme=i.theme,t.size="ax5combobox-option-group-"+i.size,t.multiple=i.multiple,t.lang=i.lang,t.options=i.options,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(c.call(this,i.columnKeys),t)))}}.bind(this))};return function(i,s){this.waitOptionsCallback=null;var l,u,d=o.isNumber(i)?i:q.call(this,i),x=this.queue[d],b={};return x.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activecomboboxOptionGroup?this.activecomboboxQueueIndex==d?this:s>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(d,(s||0)+1)}.bind(this),e.animateTime),this):(x.optionFocusIndex=-1,x.selected&&x.selected.length>0&&(x.optionSelectedIndex=x.selected[0]["@findex"]),b.id=x.id,b.theme=x.theme,b.size="ax5combobox-option-group-"+x.size,b.multiple=x.multiple,b.lang=x.lang,x.$display.attr("data-combobox-option-group-opened","true"),x.onExpand&&(b.waitOptions=!0),b.options=x.options,this.activecomboboxOptionGroup=jQuery(ax5.mustache.render(a.call(this,x.columnKeys),b)),this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(ax5.mustache.render(c.call(this,x.columnKeys),b))),this.activecomboboxQueueIndex=d,p.call(this,"append"),jQuery(window).bind("resize.ax5combobox-"+this.instanceId,function(){p.call(this)}.bind(this)),x.selected&&x.selected.length>0&&(u=this.activecomboboxOptionGroup.find('[data-option-index="'+x.selected[0]["@index"]+'"]'),u.get(0)&&(l=u.position().top-this.activecomboboxOptionGroup.height()/3,this.activecomboboxOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:l},x.animateTime,"swing",function(){}))),setTimeout(function(){x.$displayLabel.trigger("focus"),o.selectRange(x.$displayLabel,"end")},1),jQuery(window).bind("keyup.ax5combobox-"+this.instanceId,function(e){e=e||window.event,h.call(this,e),o.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5combobox-"+this.instanceId,function(e){e=e||window.event,r.call(this,e),o.stopEvent(e)}.bind(this)),n.call(this,x,{self:this,state:"open",item:x}),x.onExpand&&(this.waitOptionsCallback=!0,t.call(this,x)),b=null,l=null,u=null,this))}}(),this.update=function(e){return this.bind(e),this},this.val=function(){var e={index:function(e,t,n){var a=this.queue[e];o.isString(t.index.gindex)?(a.options[t.index.gindex].options[t.index.index][a.columnKeys.optionSelected]=S(a,a.options[t.index.gindex].options[t.index.index][a.columnKeys.optionSelected],n),i.activecomboboxOptionGroup.find('[data-option-group-index="'+t.index.gindex+'"][data-option-index="'+t.index.index+'"]').attr("data-option-Selected",a.options[t.index.gindex].options[t.index.index][a.columnKeys.optionSelected].toString())):(a.options[t.index.index][a.columnKeys.optionSelected]=S(a,a.options[t.index.index][a.columnKeys.optionSelected],n),i.activecomboboxOptionGroup.find('[data-option-index="'+t.index.index+'"]').attr("data-option-Selected",a.options[t.index.index][a.columnKeys.optionSelected].toString())),y.call(this,e,a.options),b.call(this,e),p.call(this),o.selectRange(a.$displayLabel,"end")},arr:function(t,n,a){n.forEach(function(n){if(o.isString(n)||o.isNumber(n))e.value.call(i,t,n,a);else for(var s in e)if(n[s]){e[s].call(i,t,n,a);break}})},value:function(e,t,i){var n,a=this.queue[e],s=o.search(a.options,function(){return this[a.columnKeys.optionValue]==t});s>-1?a.options[s][a.columnKeys.optionSelected]=S(a,a.options[s][a.columnKeys.optionSelected],i):(s=a.options.length,n={"@index":s,hide:!0,addedOption:!0},n[a.columnKeys.optionValue]=t,n[a.columnKeys.optionText]=t,a.options.push(n),a.options[s][a.columnKeys.optionSelected]=S(a,a.options[s][a.columnKeys.optionSelected],i)),y.call(this,e,a.options),b.call(this,e)},text:function(e,t,i){var n=this.queue[e],a=o.search(n.options,function(){return this[n.columnKeys.optionText]==t});return a>-1?(n.options[a][n.columnKeys.optionSelected]=S(n,n.options[a][n.columnKeys.optionSelected],i),y.call(this,e,n.options),void b.call(this,e)):void console.log(ax5.info.getError("ax5combobox","501","val"))},clear:function(e){O.call(this,e),y.call(this,e,this.queue[e].options),b.call(this,e),this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-index]").attr("data-option-Selected","false")}};return function(t,i,a,s){var l=o.isNumber(t)?t:q.call(this,t);if(-1===l)return void console.log(ax5.info.getError("ax5combobox","402","val"));if("undefined"==typeof i||this.queue[l].multiple||O.call(this,l),"undefined"==typeof i)return this.queue[l].selected;if(o.isArray(i))e.arr.call(this,l,i,a);else if(o.isString(i)||o.isNumber(i))e.value.call(this,l,i,a);else if(null===i)e.clear.call(this,l);else for(var c in e)if(i[c]){e[c].call(this,l,i,a);break}return"undefined"!=typeof i&&n.call(this,this.queue[l],{self:this,item:this.queue[l],state:s?"changeValue":"setValue",value:this.queue[l].selected,internal:s}),t=null,this}}(),this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activecomboboxOptionGroup?(t=this.queue[this.activecomboboxQueueIndex],t.optionFocusIndex=-1,t.$display.removeAttr("data-combobox-option-group-opened").trigger("focus"),this.activecomboboxOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5combobox-"+this.instanceId).unbind("click.ax5combobox-"+this.instanceId).unbind("keyup.ax5combobox-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.remove(),this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,n.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(e){var t=q.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$input.removeAttr("disabled"),n.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=q.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$input.attr("disabled","disabled"),n.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&o.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};e.combobox=function(){return o.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),ax5.ui.combobox_instance=new ax5.ui.combobox,jQuery.fn.ax5combobox=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.combobox_instance.open(this);case"close":return ax5.ui.combobox_instance.close(this);case"setValue":return ax5.ui.combobox_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.combobox_instance.val(this);case"enable":return ax5.ui.combobox_instance.enable(this);case"disable":return ax5.ui.combobox_instance.disable(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.combobox_instance.bind(e)});return this}}();